---
title: "BOJfame"
author: "Stefan Angrick"
date: "`r Sys.Date()`"
vignette: >
  %\VignetteIndexEntry{BOJfame}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
output: rmarkdown::html_vignette
---

The `BOJfame` package provides an `R` interface to the Bank of Japan's [Time-Series Data Search](https://www.stat-search.boj.or.jp/index_en.html) portal. It allows users to download data directly into R using individual series codes.

The package name `BOJfame` refers to the "famecgi2" script underpinning the BOJ's database system, likely named after the [FAME](https://en.wikipedia.org/wiki/FAME_(database)) database tool.

## Installing the package

You can install the package directly from GitHub:

```{r install, eval=FALSE, message=FALSE, warning=FALSE}
library(devtools)
install_github("stefanangrick/BOJfame")  # GitHub
```

## Example usage

To start using the package, load it into your R session.

```{r loading, eval=FALSE, message=FALSE, warning=FALSE}
library("BOJfame")
```

Next, use the `get_bojfame()` function to download data series. Ensure that all series have the same frequency, or the function will return an error. The following example retrieves two daily-frequency series for a specified date range:

```{r datasets, eval=FALSE, message=FALSE, warning=FALSE}
bojdata <- get_bojfame(series_codes = c("FM01'STRDCLUCON", "IR01'MADR1Z@D"),
                       start_year = 1995, end_year = 2024)
```

The `get_bojfame()` function returns a list containing two key elements. First, a [tibble](https://tibble.tidyverse.org/) data frame with the actual time-series data, accessible via `$data`.

```{r data, eval=FALSE, message=FALSE, warning=FALSE}
bojdata$data
```

Second, a [tibble](https://tibble.tidyverse.org/) data frame with metadata, accessible via `$meta`.

```{r meta, eval=FALSE, message=FALSE, warning=FALSE}
bojdata$meta
```

To plot the data with [ggplot2](https://ggplot2.tidyverse.org), run the following:

```{r plot, eval=FALSE, message=FALSE, warning=FALSE}
library("dplyr")
library("ggplot2")

bojdata$data <- mutate(bojdata$data,
                       indicator = recode(indicator,
                                          "FM01'STRDCLUCON" = "Call rate",
                                          "IR01'MADR1Z@D" = "Basic loan rate"))

ggplot(bojdata$data, aes(x = date, y = obs_value)) +
  geom_line(aes(colour = indicator)) +
  labs(title = "Interest rates", x = "Date", y = "%") +
  theme(legend.title = element_blank())
```

Note that BOJ data sets use various time formats. The [zoo](https://cran.r-project.org/package=zoo) package (e.g., `as.yearmon()`) can handle most of these formats.

## Note

This package is neither officially related to nor endorsed by the [Bank of Japan](https://www.boj.or.jp/). Please avoid overloading the BOJ servers with unnecessary requests.
